{% extends "layout.html" %} {% block title %}World Clock{% endblock %} {% block
main %}
<link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
<div class="container py-4">
  <div class="row justify-content-center">
    <div class="col-md-10">
      <div class="card shadow">
        <div class="card-body">
          <h3 class="card-title mb-3">
            <i class="bi bi-globe"></i> World Clock
          </h3>
          <div id="map" style="height: 400px"></div>
          <div id="clocks"></div>
        </div>
      </div>
    </div>
  </div>
</div>
<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
<script>
  var map = L.map("map").setView([20, 0], 2);
  L.tileLayer(
    "https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png",
    { attribution: "Â© CartoDB" }
  ).addTo(map);
  map.on("click", function (e) {
    fetch(`https://worldtimeapi.org/api/timezone/Etc/GMT`)
      .then((r) => r.json())
      .then((data) => {
        let div = document.createElement("div");
        div.textContent = `Time at (${e.latlng.lat.toFixed(
          2
        )}, ${e.latlng.lng.toFixed(2)}): ${data.datetime}`;
        document.getElementById("clocks").appendChild(div);
      });
  });
</script>
{% endblock %}
