{% extends "layout.html" %} {% block title %}Reverse Image Search{% endblock %}
{% block main %}
<div class="container py-4" style="max-width: 500px">
  <h2 class="mb-3">Reverse Image Search</h2>
  <form method="post" enctype="multipart/form-data" id="imgForm">
    <div class="mb-3">
      <input
        type="file"
        name="image"
        id="imageInput"
        class="form-control"
        accept="image/*"
      />
      <div
        id="dropZone"
        class="border rounded p-3 text-center mt-2"
        style="background: var(--bs-body-bg)"
      >
        Drag & drop an image here or click above to select.
      </div>
    </div>
    <button class="btn btn-primary">Search</button>
  </form>
  {% if result %}
  <div class="alert alert-info mt-3">{{ result }}</div>
  {% endif %}
  <div class="alert alert-warning mt-3">
    Uploaded images are stored temporarily and deleted after search.
  </div>
</div>
<script>
  const dropZone = document.getElementById("dropZone");
  const imageInput = document.getElementById("imageInput");
  dropZone.addEventListener("dragover", (e) => {
    e.preventDefault();
    dropZone.classList.add("bg-secondary");
  });
  dropZone.addEventListener("dragleave", (e) => {
    dropZone.classList.remove("bg-secondary");
  });
  dropZone.addEventListener("drop", (e) => {
    e.preventDefault();
    dropZone.classList.remove("bg-secondary");
    imageInput.files = e.dataTransfer.files;
  });
  dropZone.addEventListener("click", () => imageInput.click());
</script>
{% endblock %}
